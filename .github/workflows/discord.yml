name: Discord Commit Notify

on:
  push:

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Send Discord embed
        run: |
          curl -H "Content-Type: application/json" \
          -d "{
            \"embeds\": [{
              \"title\": \"ğŸŸ¢ New Commit\",
              \"description\": \"${{ github.event.head_commit.message }}\",
              \"url\": \"${{ github.event.head_commit.url }}\",
              \"color\": 3066993,
              \"fields\": [
                {
                  \"name\": \"ğŸ‘¤ Author\",
                  \"value\": \"${{ github.actor }}\",
                  \"inline\": false
                },
                {
                  \"name\": \"ğŸŒ¿ Branch\",
                  \"value\": \"${{ github.ref_name }}\",
                  \"inline\": false
                },
                {
                  \"name\": \"â¬˜ Commit\",
                  \"value\": \"[View Commit](${{ github.event.head_commit.url }})\",
                  \"inline\": false
                },
                {
                  \"name\": \"\",
                  \"value\": \"â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\",
                  \"inline\": false
                }
              ],
              \"footer\": {
                \"text\": \"${{ github.repository }}\"
              }
            }]
          }" \
          ${{ secrets.DISCORD_WEBHOOK }}